---
title: "Week 1 Assignment â€“ SQL and R"
author: "Karim Hammoud"
date: "`r Sys.Date()`"
output: openintro::lab_report
---

## The Overview:

The goal of this assignment is to create and analyze a survey of six movies and add the data to SQL database where we implement the data from a secure password host to the R markdown. the finding of this report is analyzing the movies and find out which one has the most rating.


I conducted the survey by asking friends and coworkers about the six movies, some of them has seen most of them and some saw only few or the movies.
I uploaded the files the Github and you can find the data here:

## Loading packages

```{r load-packages, message=FALSE}
library(RMySQL)
library(RCurl);
library(sqldf)
library(ggplot2);
```

## Establish Connection

Connect to MySql local database to pull the tables in the Movies database. 

```{r}
moviescon <- dbConnect(MySQL(),
                 user="root", password= "karim312",
                 dbname="movies", host="localhost")
summary(moviescon)
```
### Check the tables in the database
I will mainly use the movies database
```{r}
dbListTables(moviescon);
```

## Create data frame
create data frame and read the table "movies"
```{r}
moviesdata <- dbReadTable(moviescon, "movies")
moviesdata
```

## Display the data on a bar chart

We start by pulling the average rating for each movie in the table

```{r}
average <- c(14/3, 18/5, 13/5, 18/4, 9/4, 20/5)

average1 <- as.table(setNames(average, moviesdata))

```

Here we display the data, we start by changing the axis size to make sure the labels are readable when running the report.
```{r}
par(mar=c(5,2,2,0))

barplot(average1, main="Movies Rating", xlab="Movie", ylab="Rating", ylim=c(0,6), horiz=FALSE,cex.lab=1 , col= c("lightcyan","mistyrose","beige","yellow","red","green"), names.arg=c("Frozen 2", "MurderMystery", "Moana", "Joker", "The Big Kick", "Get out" ))
```

## Conclusion:

As we see in the barchart, the movies Frozen 2 and Joker got the highest average rating evethough Frozen2 had been watched only by 3 people, while Joker had been watched by all of the people in the rating list. on the other side The Big Sick movie got the worst rating of around only 2 out of 5 and it was watched by 4 people, it seems like they didn't enjoy it a lot.

Thanks,
Karim Hammoud
